# ========================
# Clash-ALL ä¼˜åŒ–é…ç½®
# ========================

# ========================
# ä¸»è¦ç«¯å£è®¾ç½®
# ========================
port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
tproxy-port: 7895

allow-lan: true
mode: rule
log-level: info

external-controller: 0.0.0.0:9090
external-ui: ui
external-ui-name: zashboard
external-ui-url: https://github.moeyy.xyz/https://github.com/Zephyruso/zashboard/archive/refs/heads/gh-pages.zip
secret: "123456"

# ========================
# DNS è®¾ç½®
# ========================
dns:
  enable: true
  listen: 0.0.0.0:7874
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.19.0.1/16
  fake-ip-filter-mode: blacklist
  nameserver:
    - 223.5.5.5
    - 119.29.29.29
  proxy-server-nameserver:
    - https://223.5.5.5/dns-query
ipv6: false

# ========================
# TUN è®¾ç½®
# ========================
tun:
  enable: true
  # system/gvisor/mixed
  stack: gvisor
  dns-hijack: ["any:53", "tcp://any:53"]
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true

# ========================
# ç­–ç•¥ç»„å®šä¹‰
# ========================
default: &default
  type: select
  proxies:
    # å…¨å±€ç›´è¿/è‡ªåŠ¨
    - DIRECT
    - æ‰€æœ‰-è‡ªåŠ¨
    - æ‰€æœ‰-æ‰‹åŠ¨
    - è½åœ°é€‰æ‹©
    # å„åœ°åŒº-è‡ªåŠ¨ï¼ˆå¸¸ç”¨ä¼˜å…ˆï¼‰
    - é¦™æ¸¯-è‡ªåŠ¨
    - æ–°åŠ å¡-è‡ªåŠ¨
    - æ—¥æœ¬-è‡ªåŠ¨
    - éŸ©å›½-è‡ªåŠ¨
    - ç¾å›½-è‡ªåŠ¨
    # å…œåº•
    - REJECT

# æŒ‰åœ°åŒºç­›é€‰ï¼ˆæ­£åˆ™ï¼‰
FilterHK: &FilterHK '^(?=.*(é¦™æ¸¯|HK|Hong|ğŸ‡­ğŸ‡°))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹|è½åœ°|å®¶å®½|è‡ªå»º|Ã—)).*$'
FilterJP: &FilterJP '^(?=.*(æ—¥æœ¬|JP|Japan|ğŸ‡¯ğŸ‡µ))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹|è½åœ°|å®¶å®½|è‡ªå»º|Ã—)).*$'
FilterKR: &FilterKR '^(?=.*(éŸ©å›½|éŸ“|KR|Korea|ğŸ‡°ğŸ‡·))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹|è½åœ°|å®¶å®½|è‡ªå»º|Ã—)).*$'
FilterSG: &FilterSG '^(?=.*(æ–°åŠ å¡|ç‹®åŸ|SG|Singapore|ğŸ‡¸ğŸ‡¬))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹|è½åœ°|å®¶å®½|è‡ªå»º|Ã—)).*$'
FilterUS: &FilterUS '^(?=.*(ç¾å›½|US|United States|America|ğŸ‡ºğŸ‡¸))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹|è½åœ°|å®¶å®½|è‡ªå»º|Ã—)).*$'
FilterUK: &FilterUK '^(?=.*(è‹±å›½|UK|United Kingdom|ğŸ‡¬ğŸ‡§))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹|è½åœ°|å®¶å®½|è‡ªå»º|Ã—)).*$'
FilterFR: &FilterFR '^(?=.*(æ³•å›½|FR|France|ğŸ‡«ğŸ‡·))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹|è½åœ°|å®¶å®½|è‡ªå»º|Ã—)).*$'
FilterDE: &FilterDE '^(?=.*(å¾·å›½|DE|Germany|ğŸ‡©ğŸ‡ª))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹|è½åœ°|å®¶å®½|è‡ªå»º|Ã—)).*$'
FilterTW: &FilterTW '^(?=.*(å°æ¹¾|TW|Taiwan|Wan|ğŸ‡¨ğŸ‡³|ğŸ‡¨ğŸ‡³))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹|è½åœ°|å®¶å®½|è‡ªå»º|Ã—)).*$'
FilterOthers: &FilterOthers '^(?!.*(ğŸ‡­ğŸ‡°|HK|Hong|é¦™æ¸¯|ğŸ‡¨ğŸ‡³|TW|Taiwan|Wan|ğŸ‡¯ğŸ‡µ|JP|Japan|æ—¥æœ¬|ğŸ‡¸ğŸ‡¬|SG|Singapore|ç‹®åŸ|ğŸ‡ºğŸ‡¸|US|United States|America|ç¾å›½|ğŸ‡©ğŸ‡ª|DE|Germany|å¾·å›½|ğŸ‡¬ğŸ‡§|UK|United Kingdom|è‹±å›½|ğŸ‡°ğŸ‡·|KR|Korea|éŸ©å›½|éŸ“|ğŸ‡«ğŸ‡·|FR|France|æ³•å›½)).*$'
FilterSave: &FilterSave '^(?=.*((\\s|-)0\\.[0-9](Ã—|x|X)|ä½å€ç‡|çœæµ|å¤§æµé‡)).*$'
FilterAdvance: &FilterAdvance '^(?=.*((?i)(\\s|-)(([1-9](\\.\\d+)?)(Ã—|x|X))|ä¸“çº¿|ä¸“ç”¨|é«˜çº§|ç›´è¿|æ€¥é€Ÿ|é«˜å€ç‡|IEPL|IPLC|AIA|CTM|CC|iepl|iplc|aia|ctm|cc)).*$'
FilterLanding: &FilterLanding '^(?=.*((?i)è½åœ°|å®¶å®½|è‡ªå»º)).*$'
FilterAll: &FilterAll '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|(\\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author)\\b|(\\d{4}-\\d{2}-\\d{2}|\\d+G)))).*$'
FilterTunnel: &FilterTunnel '^(?=.*(é¦™æ¸¯|HK|Hong|ğŸ‡­ğŸ‡°|æ—¥æœ¬|JP|Japan|ğŸ‡¯ğŸ‡µ|æ–°åŠ å¡|ç‹®åŸ|SG|Singapore|ğŸ‡¸ğŸ‡¬|éŸ©å›½|KR|Korea|ğŸ‡°ğŸ‡·|ç¾å›½|US|United States|America|ğŸ‡ºğŸ‡¸))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹|è½åœ°|å®¶å®½|è‡ªå»º|Ã—)).*$'

Select: &Select {type: select, proxies: [DIRECT],url: 'https://cp.cloudflare.com/generate_204', disable-udp: false, hidden: false, include-all: true}
Auto: &Auto {type: url-test, url: 'https://cp.cloudflare.com/generate_204', interval: 300, tolerance: 50, disable-udp: false, hidden: true, include-all: true}

proxy-groups:
  # ä¸šåŠ¡åˆ†æµç»„ï¼ˆç»Ÿä¸€å¼•ç”¨ <<: *defaultï¼‰
  - {name: ğŸš€ é»˜è®¤ä»£ç†, <<: *default}
  - {name: ğŸ¤– AI,         <<: *default}
  - {name: ğŸ“˜ GitHub,     <<: *default}
  - {name: ğŸ™‹ Telegram,   <<: *default}
  - {name: ğŸ“º YouTube,    <<: *default}
  - {name: ğŸ‘¯â€â™‚ï¸ TikTok,      <<: *default}
  - {name: ğŸ“€ æµåª’ä½“,     <<: *default}
  - {name: ğŸ¬ OneDrive,   <<: *default}
  - {name: ğŸ Apple,      <<: *default}
  - {name: ğŸªŸ Microsoft,  <<: *default}
  - {name: ğŸ€ Google,     <<: *default}
  - {name: ğŸ›  Test,       <<: *default}
  - {name: ğŸŒ å›½å¤–,       <<: *default}
  - {name: â¡ï¸ å›½å†…,       <<: *default}
  - {name: ğŸŸ æ¼ç½‘ä¹‹é±¼,   <<: *default}

  # ç‰¹æ®Šåˆ†ç»„
  - {name: ä¸­ç»§é€‰æ‹©, <<: *Select, filter: *FilterAll, icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Final.png}
  - {name: è½åœ°é€‰æ‹©, <<: *Select, filter: *FilterLanding, icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Global.png}
  - {name: æ‰€æœ‰-æ‰‹åŠ¨, <<: *Select, filter: *FilterAll, icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Static.png}
  - {name: æ‰€æœ‰-è‡ªåŠ¨, <<: *Auto,   icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Urltest.png}

  # è‡ªåŠ¨é€‰æ‹© - æŒ‰åœ°åŒº
  - {name: é¦™æ¸¯-è‡ªåŠ¨, <<: *Auto, filter: *FilterHK, icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png}
  - {name: æ—¥æœ¬-è‡ªåŠ¨, <<: *Auto, filter: *FilterJP, icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png}
  - {name: éŸ©å›½-è‡ªåŠ¨, <<: *Auto, filter: *FilterKR, icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/KR.png}
  - {name: æ–°åŠ å¡-è‡ªåŠ¨, <<: *Auto, filter: *FilterSG, icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png}
  - {name: ç¾å›½-è‡ªåŠ¨, <<: *Auto, filter: *FilterUS, icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png}
  - {name: å°æ¹¾-è‡ªåŠ¨, <<: *Auto, filter: *FilterTW, icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/CN.png}

# ========================
# è§„åˆ™å¼•æ“ï¼ˆrulesï¼‰
# ========================
rules:
  # åŸŸåç›¸å…³è§„åˆ™
  - RULE-SET,ChatGPT / Domain,ğŸ¤– AI
  - RULE-SET,Claude / Domain,ğŸ¤– AI
  - RULE-SET,Meta AI / Domain,ğŸ¤– AI
  - RULE-SET,Copilot / Domain,ğŸ¤– AI
  - RULE-SET,Gemini / Domain,ğŸ¤– AI
  - RULE-SET,GitHub / Domain,ğŸ“˜ GitHub
  - RULE-SET,Telegram / Domain,ğŸ™‹ Telegram
  - RULE-SET,Twitter / Domain,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,Reddit / Domain,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,Facebook / Domain,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,OKX / Domain,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,Bybit / Domain,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,Binance / Domain,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,TikTok / Domain,ğŸ‘¯â€â™‚ï¸ TikTok
  - RULE-SET,Netflix / Domain,ğŸ“€ æµåª’ä½“
  - RULE-SET,Disney / Domain,ğŸ“€ æµåª’ä½“
  - RULE-SET,Youtube / Domain,ğŸ“º YouTube
  - RULE-SET,Apple-CN / Domain,ğŸ Apple
  - RULE-SET,Apple / Domain,ğŸ Apple
  - RULE-SET,onedrive_domain,ğŸ¬ OneDrive
  - RULE-SET,Microsoft / Domain,ğŸªŸ Microsoft
  - RULE-SET,Google / Domain,ğŸ€ Google
  - RULE-SET,Proxy / Domain,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,Globe / Domain,ğŸŒ å›½å¤–
  - RULE-SET,Custom_Proxy,ğŸŒ å›½å¤–
  - RULE-SET,Direct / Domain,DIRECT
  - RULE-SET,China / Domain,â¡ï¸ å›½å†…
  - RULE-SET,Private / Domain,DIRECT
  - RULE-SET,Custom_Direct,DIRECT
  - RULE-SET,TEST / Domain,ğŸš€ é»˜è®¤ä»£ç†

  # IPç›¸å…³è§„åˆ™
  - RULE-SET,Telegram / IP,ğŸ™‹ Telegram,no-resolve
  - RULE-SET,Netflix / IP,ğŸ“€ æµåª’ä½“,no-resolve
  - RULE-SET,Google / IP,ğŸ€ Google,no-resolve
  - RULE-SET,China / IP,â¡ï¸ å›½å†…,no-resolve

  # å…œåº•
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

# ========================
# è§„åˆ™é›†æä¾›è€…
# ========================
rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  class: &class {type: http, interval: 86400, behavior: classical, format: text}

# åŸŸåç›¸å…³ rule-providers
rule-providers:
  ChatGPT / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/openai.mrs"}
  Claude / Domain: {<<: *class, url: "https://github.moeyy.xyz/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Claude/Claude.list"}
  Meta AI / Domain: {<<: *class, url: "https://github.moeyy.xyz/https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/MetaAi.list"}
  Copilot / Domain: {<<: *class, url: "https://github.moeyy.xyz/https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Copilot.list"}
  Gemini / Domain: {<<: *class, url: "https://github.moeyy.xyz/https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Gemini.list"}
  GitHub / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/github.mrs"}
  Telegram / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/telegram.mrs"}
  Twitter / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/x.mrs"}
  Facebook / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/facebook.mrs"}
  Apple-CN / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/apple-cn.mrs"}
  Apple / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/apple.mrs"}
  onedrive_domain: {<<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/onedrive.mrs"}
  Microsoft / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/microsoft.mrs"}
  OKX / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/okx.mrs"}
  Bybit / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/bybit.mrs"}
  Binance / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/binance.mrs"}
  TikTok / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/tiktok.mrs"}
  Netflix / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/netflix.mrs"}
  Disney / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/disney.mrs"}
  Proxy / Domain: {<<: *class, url: "https://github.moeyy.xyz/https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Proxy.list"}
  Globe / Domain: {<<: *class, url: "https://github.moeyy.xyz/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Global/Global.list"}
  Direct / Domain: {<<: *class, url: "https://github.moeyy.xyz/https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Direct.list"}
  China / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/cn.mrs"}
  Private / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/private.mrs"}
  Reddit / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/reddit.mrs"}
  Youtube / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/youtube.mrs"}
  Google / Domain: {<<: *domain, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/google.mrs"}

# IPç›¸å…³ rule-providers
  Telegram / IP: {<<: *ip, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/telegram.mrs"}
  Netflix / IP: {<<: *ip, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/netflix.mrs"}
  China / IP: {<<: *ip, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/cn.mrs"}
  Google / IP: {<<: *ip, url: "https://github.moeyy.xyz/https://github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/google.mrs"}

# å…¶ä»– rule-providers
  Custom_Proxy: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/Heart0510/Clash_rule_file_repository/refs/heads/main/rules/Agency_Rules.list"}
  Custom_Direct: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/Heart0510/Clash_rule_file_repository/refs/heads/main/rules/Direct_rules.list"}
  TEST / Domain: {<<: *class, url: "https://github.moeyy.xyz/https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Check.list"}
   
